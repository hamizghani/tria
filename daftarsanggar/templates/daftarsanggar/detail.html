{% extends 'daftarsanggar/base.html' %}
{% load static %}

{% block content %}

<style>
    :root {
        --tria-red: #e53935;
        --tria-orange: #ff9800;
        --tria-orange-soft: #fff3e0;
        --tria-border: #f0f0f0;
        --tria-text: #222222;
        --tria-muted: #555555;
    }

    /* Container utama yang membagi 2 kolom & membatasi tinggi agar tidak scroll body */
    .split-wrapper {
        display: flex;
        width: 100%;
        /* Mengambil tinggi layar dikurangi perkiraan tinggi navbar (misal 60-80px) 
           agar pas satu layar tanpa scroll browser */
        height: calc(100vh - 80px); 
        overflow: hidden;
        background: #fff;
    }

    /* --- KOLOM KIRI (GAMBAR) --- */
    .image-panel {
        flex: 1; /* Mengambil 50% lebar - bisa diubah flex: 1.5 untuk lebih lebar */
        position: relative;
        background-color: #f8f8f8;
        overflow: hidden;
    }

    .image-panel img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Gambar akan full memenuhi area tanpa gepeng */
        display: block;
    }

    /* --- KOLOM KANAN (KONTEN) --- */
    .content-panel {
        flex: 1; /* Mengambil sisa ruang */
        padding: 2.5rem 3rem;
        overflow-y: auto; /* HANYA bagian ini yang scroll jika konten panjang */
        display: flex;
        flex-direction: column;
    }

    /* Styling Konten */
    .sanggar-title {
        font-size: 2.2rem;
        font-weight: 800;
        margin: 0 0 0.5rem 0;
        color: var(--tria-text);
        line-height: 1.2;
    }

    .sanggar-subtitle {
        font-size: 1rem;
        color: var(--tria-muted);
        margin-bottom: 2rem;
        border-bottom: 1px solid var(--tria-border);
        padding-bottom: 1.5rem;
    }

    .sanggar-description {
        font-size: 1rem;
        line-height: 1.7;
        color: var(--tria-muted);
        margin-bottom: 2rem;
    }

    /* Contact Box yang dirapikan */
    .contact-box {
        background: var(--tria-orange-soft); /* Sedikit beda biar pop-up */
        border: 1px solid rgba(255, 152, 0, 0.2);
        padding: 1.5rem;
        border-radius: 1rem;
        margin-bottom: 2.5rem;
    }

    .contact-item {
        display: flex;
        align-items: center;
        margin-bottom: 0.8rem;
        color: var(--tria-text);
        font-weight: 500;
    }

    .contact-icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 0.75rem;
        color: var(--tria-orange);
    }

    .wa-btn {
        display: block;
        text-align: center;
        background: #25D366;
        color: white;
        padding: 0.8rem;
        margin-top: 1.2rem;
        border-radius: 8px;
        font-weight: 700;
        text-decoration: none;
        transition: 0.2s;
    }

    .wa-btn:hover {
        background: #1ebe59;
        color: white;
    }

    .wa-disabled {
        background: #ccc;
        cursor: not-allowed;
    }

    /* Reviews */
    .review-section {
        margin-top: auto; /* Dorong ke bawah kalau konten sedikit */
    }
    
    .review-title {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 1rem;
    }

    .review-card {
        padding: 1rem;
        border-radius: 0.8rem;
        border: 1px solid var(--tria-border);
        margin-bottom: 0.8rem;
        background: #fff;
    }

    .review-user {
        font-weight: 700;
        color: var(--tria-text);
        font-size: 0.9rem;
        margin-bottom: 0.3rem;
        display: flex;
        align-items: center;
    }
    
    .review-avatar {
        width: 24px;
        height: 24px;
        background: var(--tria-orange);
        color: white;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-right: 8px;
        font-size: 0.7rem;
    }

    .review-text {
        font-size: 0.9rem;
        color: var(--tria-muted);
        font-style: italic;
        margin: 0;
    }

    /* Responsiveness: Kalau di HP balik jadi stack */
    @media (max-width: 768px) {
        .split-wrapper {
            flex-direction: column;
            height: auto; /* Biarkan scroll normal di HP */
            overflow: visible;
        }
        .image-panel {
            height: 300px; /* Tinggi gambar fix di HP */
            flex: none;
        }
        .content-panel {
            padding: 1.5rem;
            overflow: visible;
        }
    }
</style>

<div class="split-wrapper">

    <div class="image-panel">
        <img 
            src="{% if '.png' in sanggar.image|lower %}{% static sanggar.image %}{% else %}{{ sanggar.image }}{% endif %}"
            alt="{{ sanggar.nama_sanggar }}"
            onerror="this.src='https://via.placeholder.com/640x800?text=No+Image'"
        />
    </div>

    <div class="content-panel">
        
        <div>
            <h1 class="sanggar-title">{{ sanggar.nama_sanggar }}</h1>
            <p class="sanggar-subtitle">
                Kenali sejarah dan karakteristik <strong>{{ sanggar.nama_sanggar }}</strong>
            </p>

            <p class="sanggar-description">{{ sanggar.description }}</p>
        </div>

        <div class="contact-box">
            <div class="contact-item">
                <span class="contact-icon">üìû</span> {{ sanggar.phone_number }}
            </div>
            <div class="contact-item">
                <span class="contact-icon">‚úâÔ∏è</span> {{ sanggar.email }}
            </div>
            <div class="contact-item">
                <span class="contact-icon">üìç</span> {{ sanggar.location }}
            </div>

            {% if sanggar.wa_link %}
                <a href="{{ sanggar.wa_link }}" target="_blank" class="wa-btn">Chat via WhatsApp</a>
            {% else %}
                <div class="wa-btn wa-disabled">WhatsApp Tidak Tersedia</div>
            {% endif %}
        </div>

        <div class="review-section">
            <h2 class="review-title">Ulasan Pengunjung</h2>
            
            {% for review in sanggar.reviews %}
            <div class="review-card">
                <div class="review-user">
                    <div class="review-avatar">{{ review.user|slice:":1" }}</div>
                    {{ review.user }}
                </div>
                <p class="review-text">‚Äú{{ review.comment }}‚Äù</p>
            </div>
            {% empty %}
            <p style="color:var(--tria-muted); font-size: 0.9rem;">Belum ada ulasan.</p>
            {% endfor %}
        </div>

    </div>
</div>

{% endblock %}