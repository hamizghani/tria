{% extends 'daftarsanggar/base.html' %}
{% load static %}

{% block content %}

<style>
    :root {
        --tria-red: #e53935;
        --tria-orange: #ff9800;
        --tria-orange-soft: #fff3e0;
        --tria-border: #f0f0f0;
        --tria-text: #222222;
        --tria-muted: #555555;
    }

    /* WRAPPER UTAMA: Mengunci tinggi layar agar tidak scroll body */
    .split-wrapper {
        display: flex;
        width: 100%;
        /* Sesuaikan 70px dengan tinggi navbar kamu */
        height: calc(100vh - 70px);
        overflow: hidden;
        background: #fff;
    }

    /* --- KOLOM KIRI: GAMBAR (FIXED ORANGE BORDER & FILL) --- */
    .image-panel {
        flex: 1.3; /* Lebar porsi gambar */
        position: relative;
        overflow: hidden;

        /* KUNCI 1: Border Orange Tetap */
        border: 8px solid var(--tria-orange);
        /* background cadangan saat gambar loading */
        background-color: var(--tria-orange-soft);
    }

    .image-panel img {
        width: 100%;
        height: 100%;
        /* KUNCI 2: 'cover' memaksa gambar mengisi penuh container tanpa sisa ruang.
           Catatan: Bagian pinggir gambar mungkin akan terpotong agar pas. */
        object-fit: cover;
        display: block;
    }

    /* --- KOLOM KANAN: KONTEN --- */
    .content-panel {
        flex: 1; /* Lebar porsi konten */
        padding: 2.5rem;
        overflow-y: auto; /* Hanya kolom ini yang scroll */
        background: #fff;
        display: flex;
        flex-direction: column;
        /* Tambahkan border kiri tipis sebagai pemisah dengan border oranye */
        border-left: 1px solid var(--tria-border);
    }

    /* Styling Typography & Komponen */
    .sanggar-title {
        font-size: 2rem;
        font-weight: 800;
        margin: 0 0 0.5rem 0;
        color: var(--tria-text);
        line-height: 1.2;
    }

    .sanggar-subtitle {
        font-size: 0.95rem;
        color: var(--tria-muted);
        padding-bottom: 1rem;
        margin-bottom: 1.5rem;
        border-bottom: 1px solid var(--tria-border);
    }

    .sanggar-description {
        font-size: 0.95rem;
        line-height: 1.7;
        color: var(--tria-text);
        margin-bottom: 2rem;
        white-space: pre-line;
    }

    /* Contact Card Compact */
    .contact-card {
        background: #f9f9f9;
        border: 1px solid #eee;
        padding: 1.2rem;
        border-radius: 12px;
        margin-bottom: 2rem;
    }

    .contact-row {
        display: flex;
        align-items: center;
        margin-bottom: 0.8rem;
        font-size: 0.9rem;
        color: var(--tria-text);
    }

    .contact-row i {
        width: 24px;
        color: var(--tria-orange);
        margin-right: 8px;
        text-align: center;
    }

    .wa-btn {
        display: block;
        background: #25D366;
        color: white;
        text-align: center;
        padding: 0.8rem;
        border-radius: 8px;
        font-weight: 700;
        text-decoration: none;
        margin-top: 1rem;
        transition: 0.2s;
        font-size: 0.9rem;
    }
    .wa-btn:hover { background: #1ebe59; color: #fff; transform: translateY(-2px); }
    .wa-disabled { background: #ccc; cursor: default; }
    .wa-disabled:hover { transform: none; background: #ccc; }

    /* Reviews Compact */
    .reviews-list {
        display: grid;
        gap: 1rem;
    }

    .review-item {
        border: 1px solid var(--tria-border);
        border-radius: 10px;
        padding: 1rem;
        background: #fff;
    }
    .review-header {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
        font-weight: 700;
    }
    .review-avatar {
        width: 28px; height: 28px;
        background: var(--tria-orange);
        color: #fff;
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        margin-right: 8px;
        font-size: 0.75rem;
    }
    .review-body {
        font-size: 0.85rem;
        color: var(--tria-muted);
        font-style: italic;
    }

    /* Responsive untuk Mobile */
    @media (max-width: 768px) {
        .split-wrapper {
            flex-direction: column;
            height: auto; /* Balik ke scroll biasa di HP */
            overflow: visible;
        }
        .image-panel {
            height: 350px; /* Tinggi fix untuk gambar di HP */
            flex: none;
            /* Di HP border oranye mungkin terlalu tebal, bisa dikurangi kalau mau */
            border-width: 4px; 
        }
        .content-panel {
            overflow: visible;
            padding: 1.5rem;
            border-left: none;
        }
    }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<div class="split-wrapper">

    <div class="image-panel">
        <img
            src="{% if 'http' in sanggar.image %}
                    {{ sanggar.image }}
                {% else %}
                    {% static sanggar.image %}
                {% endif %}"
            alt="{{ sanggar.nama_sanggar }}"
            onerror="this.src='https://via.placeholder.com/800x600?text=No+Image'"
        />
    </div>

    <div class="content-panel">

        <div>
            <h1 class="sanggar-title">{{ sanggar.nama_sanggar }}</h1>
            <p class="sanggar-subtitle">Profil Lengkap & Informasi Sewa</p>
        </div>

        <div class="contact-card">
            <div class="contact-row">
                <i class="fas fa-map-marker-alt"></i>
                <span>{{ sanggar.location }}</span>
            </div>
            <div class="contact-row">
                <i class="fas fa-phone"></i>
                <span>{{ sanggar.phone_number }}</span>
            </div>
            <div class="contact-row">
                <i class="fas fa-envelope"></i>
                <span>{{ sanggar.email }}</span>
            </div>

            {% if sanggar.wa_link %}
                <a href="{{ sanggar.wa_link }}" target="_blank" class="wa-btn">
                    <i class="fab fa-whatsapp"></i> Chat WhatsApp
                </a>
            {% else %}
                <div class="wa-btn wa-disabled">WhatsApp Tidak Tersedia</div>
            {% endif %}
        </div>

        <div>
            <h3 style="font-weight: 700; margin-bottom: 0.5rem;">Tentang Sanggar</h3>
            <p class="sanggar-description">{{ sanggar.description }}</p>
        </div>

        <div>
            <h3 style="font-weight: 700; margin-bottom: 1rem;">Ulasan Pengunjung</h3>
            <div class="reviews-list">
                {% for review in sanggar.reviews %}
                <div class="review-item">
                    <div class="review-header">
                        <div class="review-avatar">{{ review.user|slice:":1" }}</div>
                        {{ review.user }}
                    </div>
                    <div class="review-body">“{{ review.comment }}”</div>
                </div>
                {% empty %}
                <p style="color: #999; font-size: 0.9rem;">Belum ada ulasan.</p>
                {% endfor %}
            </div>
        </div>

    </div>
</div>

{% endblock %}